<div class="wrapper wrapper-content animated fadeInRight" ng-controller="calcCtrl">

    <div class="row">
        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>Mortgage Calculation</h5>
                    <div ibox-tools></div>
                </div>
                <div class="ibox-content">
                    <div class="row">
                        <div class="col-sm-12">
                            <form class="form-horizontal" name="calc_form" role="form" novalidate ng-submit="Calculations()">
                                <div class="form-group">
                                    <label class="col-lg-2 control-label">Loan Amount</label>
                                    <div class="col-lg-4">
                                        <input type="number" name="loanAmount" ng-model="loan.LoanAmount" placeholder="Loan Amount" class="form-control" required>
                                        <div class="m-t-xs text-left" ng-show="calc_form.loanAmount.$invalid && calc_form.submitted">
                                            <small class="text-danger" ng-show="calc_form.loanAmount.$error.required">Please enter loan amount</small>
                                        </div>
                                    </div>
                                    <label class="col-lg-2 control-label">Interest Rate</label>
                                    <div class="col-lg-4">
                                        <input type="number" name="interestRate" ng-model="loan.InterestRate" placeholder="Interest Rate" class="form-control" required>
                                        <div class="m-t-xs text-left" ng-show="calc_form.interestRate.$invalid && calc_form.submitted">
                                            <small class="text-danger" ng-show="calc_form.interestRate.$error.required">Please enter interest </small>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="col-lg-2 control-label">Loan Type</label>
                                    <div class="col-lg-4"> 
                                        <select class="form-control" name="loanType" ng-model="loan.LoanType" required>
                                            <option value="Variable">Variable</option>
                                            <option value="Fixed">Fixed</option>
                                        </select>
                                        <div class="m-t-xs text-left" ng-show="calc_form.loanType.$invalid && calc_form.submitted">
                                            <small class="text-danger" ng-show="calc_form.loanType.$error.required">Please enter loan type </small>
                                        </div>
                                    </div>
                                    <label class="col-lg-2 control-label">Years</label>
                                    <div class="col-lg-4">
                                        <input type="number" name="years" ng-model="loan.Years" placeholder="Years" class="form-control" required>
                                        <div class="m-t-xs text-left" ng-show="calc_form.years.$invalid && calc_form.submitted">
                                            <small class="text-danger" ng-show="calc_form.years.$error.required">Please enter year</small>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <div class="col-lg-offset-2 col-lg-10 text-right">
                                        <button class="btn btn-sm btn-primary" type="submit"><i class="fa fa-calculator"></i> Calculate</button>
                                    </div>
                                </div>
                            </form>
                        </div>

                        <div class="col-sm-12">
                            <label>Total Interest  :</label> 
                            <strong class="text-danger">{{getInterest() | number : 2}}</strong> 
                        </div>
                    </div>
                    
                    <table class="table table-bordered m-t-md">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Date</th>
                                <th>EMI Amount</th>
                                <th>Principal amount</th>
                                <th>Interest</th>
                                <th>Total Amount</th>
                            </tr>
                        </thead>
                        <tbody ng-repeat="loan in MortgageLoan">
                          <tr>
                              <td>{{$index+1}}</td>
                              <td>{{loan.EMIDate | date :  "dd-MM-yyyy" }}</td>
                              <td>{{loan.EMIAmount}}</td>
                              <td>{{loan.PrincipalAmount}}</td>
                              <td>{{loan.InterestAmount}}</td>
                              <td>{{loan.TotalAmount}}</td>
                          </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
